import{p as e,a as d,w as $,A as F,x as P,v as E}from"./chunk-OIYGIGL5-BqXurzTp.js";import{c as y}from"./utils-LCX7tCys.js";import{c as D,u as G}from"./puter-Ca5OHvpr.js";const H=({score:r,suggestions:t})=>e.jsxs("div",{className:y("rounded-2xl shadow-md w-full bg-gradient-to-b to-light-white p-8 flex flex-col gap-4",r>69?"from-green-100":r>49?"from-yellow-100":"from-red-100"),children:[e.jsxs("div",{className:"flex flex-row gap-4 items-center",children:[e.jsx("img",{src:r>69?"/icons/ats-good.svg":r>49?"/icons/ats-warning.svg":"/icons/ats-bad.svg",alt:"ATS",className:"w-10 h-10"}),e.jsxs("p",{className:"text-2xl font-semibold",children:["ATS Score - ",r,"/100"]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("p",{className:"font-medium text-xl",children:"How well does your resume pass through Applicant Tracking Systems?"}),e.jsx("p",{className:"text-lg text-gray-500",children:"Your resume was scanned like an employer would. Here's how it performed:"}),t.map((s,c)=>e.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[e.jsx("img",{src:s.type==="good"?"/icons/check.svg":"/icons/warning.svg",alt:"ATS",className:"w-4 h-4"}),e.jsx("p",{className:"text-lg text-gray-500",children:s.tip})]},c)),e.jsx("p",{className:"text-lg text-gray-500",children:"Want a better score? Improve your resume by applying the suggestions listed below."})]})]}),L=d.createContext(void 0),C=()=>{const r=d.useContext(L);if(!r)throw new Error("Accordion components must be used within an Accordion");return r},W=({children:r,defaultOpen:t,allowMultiple:s=!1,className:c=""})=>{const[l,o]=d.useState(t?[t]:[]),a=i=>{o(m=>s?m.includes(i)?m.filter(u=>u!==i):[...m,i]:m.includes(i)?[]:[i])},n=i=>l.includes(i);return e.jsx(L.Provider,{value:{activeItems:l,toggleItem:a,isItemActive:n},children:e.jsx("div",{className:`space-y-2 ${c}`,children:r})})},h=({id:r,children:t,className:s=""})=>e.jsx("div",{className:`overflow-hidden border-b border-gray-200 ${s}`,children:t}),g=({itemId:r,children:t,className:s="",icon:c,iconPosition:l="right"})=>{const{toggleItem:o,isItemActive:a}=C(),n=a(r),i=e.jsx("svg",{className:y("w-5 h-5 transition-transform duration-200",{"rotate-180":n}),fill:"none",stroke:"#98A2B3",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}),m=()=>{o(r)};return e.jsxs("button",{onClick:m,className:`
        w-full px-4 py-3 text-left
        focus:outline-none
        transition-colors duration-200 flex items-center justify-between cursor-pointer
        ${s}
      `,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[l==="left"&&(c||i),e.jsx("div",{className:"flex-1",children:t})]}),l==="right"&&(c||i)]})},p=({itemId:r,children:t,className:s=""})=>{const{isItemActive:c}=C(),l=c(r);return e.jsx("div",{className:`
        overflow-hidden transition-all duration-300 ease-in-out
        ${l?"max-h-fit opacity-100":"max-h-0 opacity-0"}
        ${s}
      `,children:e.jsx("div",{className:"px-4 py-3 ",children:t})})},I=({score:r})=>{let t="",s="";return r>70?(t="bg-badge-green text-green-600",s="Strong"):r>49?(t="bg-badge-yellow text-yellow-600",s="Good Start"):(t="bg-badge-red text-red-600",s="Needs Work"),e.jsx("div",{className:`px-3 py-1 rounded-full ${t}`,children:e.jsx("p",{className:"text-sm font-medium",children:s})})},J={overallScore:72,toneAndStyle:{score:75,tips:[]},content:{score:68,tips:[]},structure:{score:55,tips:[]},skills:{score:45,tips:[]}},x=D((r,t)=>({feedback:null,imageUrl:null,resumeUrl:null,setFeedback:s=>r(()=>({feedback:s})),setImageUrl:s=>{const c=t().imageUrl;if(c&&c!==s)try{URL.revokeObjectURL(c)}catch{}r(()=>({imageUrl:s}))},setResumeUrl:s=>{const c=t().resumeUrl;if(c&&c!==s)try{URL.revokeObjectURL(c)}catch{}r(()=>({resumeUrl:s}))},clearAll:()=>{const s=t();try{s.imageUrl&&URL.revokeObjectURL(s.imageUrl)}catch{}try{s.resumeUrl&&URL.revokeObjectURL(s.resumeUrl)}catch{}r({feedback:null,imageUrl:null,resumeUrl:null})},resetToDefault:()=>{const s=t();try{s.imageUrl&&URL.revokeObjectURL(s.imageUrl)}catch{}try{s.resumeUrl&&URL.revokeObjectURL(s.resumeUrl)}catch{}r({feedback:J,imageUrl:null,resumeUrl:null})},updateCategoryScore:(s,c)=>r(l=>l.feedback?{feedback:{...l.feedback,[s]:{...l.feedback[s],score:c}}}:l),updateOverallScore:s=>r(c=>({feedback:c.feedback?{...c.feedback,overallScore:s}:c.feedback})),loadFromKV:async(s,c,l)=>{if(s)try{const o=await c.get(`resume:${s}`);if(!o)return;const a=JSON.parse(o);if(a.resumePath&&l)try{const n=await l.read(a.resumePath);if(n){const i=new Blob([n],{type:"application/pdf"}),m=URL.createObjectURL(i);t().setResumeUrl(m)}}catch{}if(a.imagePath&&l)try{const n=await l.read(a.imagePath);if(n){const i=URL.createObjectURL(n);t().setImageUrl(i)}}catch{}a.feedback&&t().setFeedback(a.feedback)}catch{return}},persistToKV:async(s,c)=>{if(!s)throw new Error("persistToKV requires id");const o={feedback:t().feedback};try{await c.put(`resume:${s}`,JSON.stringify(o))}catch(a){throw a}}})),j=()=>({score:0,tips:[]}),b=({title:r,categoryScore:t})=>e.jsxs("div",{className:"flex flex-row gap-4 items-center py-2 justify-between w-full",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("p",{className:"text-2xl font-semibold",children:r}),e.jsx(I,{score:t})]}),e.jsxs("div",{className:"text-xl font-medium",children:[e.jsx("span",{className:t>69?"text-green-600":t>39?"text-yellow-600":"text-red-600",children:t}),"/100"]})]}),v=({tips:r})=>e.jsxs("div",{className:"flex flex-col gap-4 items-center w-full",children:[e.jsx("div",{className:"bg-gray-50 w-full rounded-lg px-5 py-4 grid grid-cols-2 gap-4",children:r.map((t,s)=>e.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[e.jsx("img",{src:t.type==="good"?"/icons/check.svg":"/icons/warning.svg",alt:"score",className:"size-5"}),e.jsx("p",{className:"text-xl text-gray-500 ",children:t.tip})]},s))}),e.jsx("div",{className:"flex flex-col gap-4 w-full",children:r.map((t,s)=>e.jsxs("div",{className:y("flex flex-col gap-2 rounded-2xl p-4",t.type==="good"?"bg-green-50 border border-green-200 text-green-700":"bg-yellow-50 border border-yellow-200 text-yellow-700"),children:[e.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[e.jsx("img",{src:t.type==="good"?"/icons/check.svg":"/icons/warning.svg",alt:"score",className:"size-5"}),e.jsx("p",{className:"text-xl font-semibold",children:t.tip})]}),e.jsx("p",{children:t.explanation})]},s+t.tip))})]}),K=({feedback:r})=>{const t=x(a=>a.setFeedback),s=x(a=>a.feedback?.toneAndStyle??j()),c=x(a=>a.feedback?.content??j()),l=x(a=>a.feedback?.structure??j()),o=x(a=>a.feedback?.skills??j());return d.useEffect(()=>{r&&t(r)},[r,t]),e.jsx("div",{className:"flex flex-col gap-4 w-full",children:e.jsxs(W,{children:[e.jsxs(h,{id:"tone-style",children:[e.jsx(g,{itemId:"tone-style",children:e.jsx(b,{title:"Tone & Style",categoryScore:s.score})}),e.jsx(p,{itemId:"tone-style",children:e.jsx(v,{tips:s.tips})})]}),e.jsxs(h,{id:"content",children:[e.jsx(g,{itemId:"content",children:e.jsx(b,{title:"Content",categoryScore:c.score})}),e.jsx(p,{itemId:"content",children:e.jsx(v,{tips:c.tips})})]}),e.jsxs(h,{id:"structure",children:[e.jsx(g,{itemId:"structure",children:e.jsx(b,{title:"Structure",categoryScore:l.score})}),e.jsx(p,{itemId:"structure",children:e.jsx(v,{tips:l.tips})})]}),e.jsxs(h,{id:"skills",children:[e.jsx(g,{itemId:"skills",children:e.jsx(b,{title:"Skills",categoryScore:o.score})}),e.jsx(p,{itemId:"skills",children:e.jsx(v,{tips:o.tips})})]})]})})},M=({score:r=75})=>{const[t,s]=d.useState(0),c=d.useRef(null),l=r/100;return d.useEffect(()=>{c.current&&s(c.current.getTotalLength())},[]),e.jsx("div",{className:"flex flex-col items-center",children:e.jsxs("div",{className:"relative w-40 h-20",children:[e.jsxs("svg",{viewBox:"0 0 100 50",className:"w-full h-full",children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"gaugeGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"0%",stopColor:"#a78bfa"}),e.jsx("stop",{offset:"100%",stopColor:"#fca5a5"})]})}),e.jsx("path",{d:"M10,50 A40,40 0 0,1 90,50",fill:"none",stroke:"#e5e7eb",strokeWidth:"10",strokeLinecap:"round"}),e.jsx("path",{ref:c,d:"M10,50 A40,40 0 0,1 90,50",fill:"none",stroke:"url(#gaugeGradient)",strokeWidth:"10",strokeLinecap:"round",strokeDasharray:t,strokeDashoffset:t*(1-l)})]}),e.jsx("div",{className:"absolute inset-0 flex flex-col items-center justify-center pt-2",children:e.jsxs("div",{className:"text-xl font-semibold pt-4",children:[r,"/100"]})})]})})},k=()=>({score:0,tips:[]}),w=({title:r,score:t})=>{const s=t>69?"text-green-600":t>49?"text-yellow-600":"text-red-600";return e.jsx("div",{className:"resume-summary px-4 py-2",children:e.jsxs("div",{className:"category flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("p",{className:"text-2xl font-semibold",children:r}),e.jsx(I,{score:t})]}),e.jsxs("p",{className:"text-2xl",children:[e.jsx("span",{className:s,children:t}),"/100"]})]})})},V=({feedback:r})=>{const t=x(n=>n.setFeedback),s=x(n=>n.feedback?.overallScore??0),c=x(n=>n.feedback?.toneAndStyle??k()),l=x(n=>n.feedback?.content??k()),o=x(n=>n.feedback?.structure??k()),a=x(n=>n.feedback?.skills??k());return d.useEffect(()=>{r&&t(r)},[r,t]),e.jsxs("div",{className:"bg-white rounded-2xl shadow-md w-full",children:[e.jsxs("div",{className:"flex flex-row max-sm:flex-col items-center p-4 gap-8",children:[e.jsx(M,{score:s}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Your Resume Score"}),e.jsx("p",{className:"text-sm text-gray-500",children:"This score is calculated based on the variables listed below."})]})]}),e.jsxs("div",{className:"px-4 pb-4 pt-2",children:[e.jsx(w,{title:"Tone & Style",score:c.score}),e.jsx(w,{title:"Content",score:l.score}),e.jsx(w,{title:"Structure",score:o.score}),e.jsx(w,{title:"Skills",score:a.score})]})]})},X=()=>[{title:"Resumind | Review"},{name:"description",content:"Detailed Review of Your Resume"}],Y=()=>{const{auth:r,isLoading:t,fs:s,ai:c,kv:l}=G(),{id:o}=F(),[a,n]=d.useState(""),[i,m]=d.useState(""),[u,T]=d.useState(null),B=P();return d.useEffect(()=>{!t&&!r.isAuthenticated&&B(`/auth?next=/resume/${o}`)},[t]),d.useEffect(()=>{(async()=>{const N=await l.get(`resume:${o}`);if(!N)return;const f=JSON.parse(N),U=await s.read(f.resumePath);if(!U)return;const O=new Blob([U],{type:"application/pdf"}),S=URL.createObjectURL(O);m(S);const R=await s.read(f.imagePath);if(!R)return;const A=URL.createObjectURL(R);n(A),T(f.feedback),console.log({resumeUrl:S,imageUrl:A,feedback:f.feedback})})()},[o]),e.jsxs("main",{className:"!pt-0",children:[e.jsx("nav",{className:"resume-nav",children:e.jsxs(E,{to:"/",className:"back-button",children:[e.jsx("img",{src:"/icons/back.svg",alt:"logo",className:"w-2.5 h-2.5"}),e.jsx("span",{className:"text-gray-800 text-sm font-bold",children:"Back to Homepage"})]})}),e.jsxs("div",{className:"flex flex-row w-full max-lg:flex-col-reverse",children:[e.jsx("section",{className:"feedback-section bg [url('/images/bg-small.svg') bg-cover h-[100vh] sticky top-0 items-center justfiy-center]",children:a&&i&&e.jsx("div",{className:"animate-in fade-in duration-1000 gradient-border max-sm:m-0 h-[90%] max-wxl:h-fit w-fit",children:e.jsx("a",{href:i,target:"_blank",rel:"noopener noreferrer",children:e.jsx("img",{src:a,className:"w-full h-full object-contain rounded-2xl",title:"resume"})})})}),e.jsxs("section",{className:"feedback-section",children:[e.jsx("h2",{className:"text-4xl !text-black font-bold",children:"Resume Review"}),u?e.jsxs("div",{className:"flex flex-col gap-8 animate-in fade-in duration-1000",children:[e.jsx(V,{feedback:u}),e.jsx(H,{score:u.ATS?.score||0,suggestions:u.ATS?.tips||[]}),e.jsx(K,{feedback:u})]}):e.jsx("img",{src:"/images/resume-scan-2.gif",className:"w-full"})]})]})]})},Z=$(Y);export{Z as default,X as meta};
